<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar_0613 - Live Stream</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FIXED: Switched to a reliable CDN for icons to prevent "MIME type" errors -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Twitch Purple Accent */
        .twitch-accent { color: #9146FF; }
        .twitch-bg { background-color: #9146FF; }
        .twitch-hover:hover { background-color: #772ce8; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1f1f23; }
        ::-webkit-scrollbar-thumb { background: #9146FF; border-radius: 4px; }
    </style>
</head>
<body class="bg-[#0e0e10] text-gray-100 font-sans min-h-screen flex flex-col">

    <!-- Navigation -->
    <nav class="bg-[#18181b] border-b border-[#2d2d30] py-4 sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <!-- Icon -->
                <div class="w-10 h-10 bg-gradient-to-br from-purple-600 to-indigo-900 rounded-lg flex items-center justify-center border border-purple-500/30">
                    <i data-lucide="zap" class="text-white fill-current"></i>
                </div>
                <!-- Brand Name -->
                <span class="text-xl font-bold tracking-tight uppercase">SOLAR<span class="twitch-accent">_0613</span></span>
            </div>
            
            <div class="hidden md:flex space-x-8 font-medium text-sm tracking-wide">
                <a href="#home" class="hover:text-[#9146FF] transition-colors duration-200">Stream</a>
                <a href="#schedule" class="hover:text-[#9146FF] transition-colors duration-200">Schedule</a>
                <a href="#socials" class="hover:text-[#9146FF] transition-colors duration-200">Socials</a>
            </div>

            <a href="https://twitch.tv/solar_0613" target="_blank" class="twitch-bg text-white px-5 py-2 rounded-full font-bold text-sm twitch-hover transition-all transform hover:scale-105 flex items-center space-x-2 shadow-lg shadow-purple-900/20">
                <i data-lucide="twitch" class="w-4 h-4"></i>
                <span>Subscribe</span>
            </a>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-grow container mx-auto px-4 py-6 md:py-8" id="home">
        
        <!-- Live Stream & Chat Container -->
        <!-- Logic: On mobile, stack video on top of chat. On desktop, side-by-side. -->
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-4 h-[85vh] min-h-[600px] mb-16">
            
            <!-- Video Player (3/4 width) -->
            <div class="lg:col-span-3 bg-black rounded-xl overflow-hidden shadow-2xl border border-[#2d2d30] relative group">
                <!-- Loading State (Now with ID for removal) -->
                <div id="stream-loading" class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none z-0 bg-[#0e0e10]">
                    <span class="text-purple-500 animate-pulse font-mono mb-2">Connecting to Solar_0613...</span>
                    <span class="text-gray-600 text-xs">If this takes too long, check your browser privacy settings.</span>
                </div>
                <!-- Video Player Container -->
                <div id="twitch-embed" class="w-full h-full relative z-10"></div>
            </div>
            <div class="lg:hidden mb-4">
                <a href="https://www.twitch.tv/solar_0613/chat" target="_blank" 
                   class="w-full bg-[#18181b] border border-[#2d2d30] hover:bg-[#2d2d30] text-purple-400 font-bold py-3 px-4 rounded-xl flex items-center justify-center space-x-2 transition-all">
                    <i data-lucide="message-square" class="w-5 h-5"></i>
                    <span>Open Chat in App</span>
                </a>
            </div>
            <!-- Chat (1/4 width) -->
            <div class="lg:col-span-1 bg-[#18181b] rounded-xl border border-[#2d2d30] hidden lg:block overflow-hidden shadow-xl relative">
                <!-- Chat Fallback/Info -->
                <div class="absolute inset-0 flex items-center justify-center z-0 p-4 text-center">
                    <div class="text-xs text-gray-500">
                        <p class="mb-2">Chat loading...</p>
                        <p>If using Firefox/Brave, disable "Shields" for this site or open chat externally.</p>
                        <!-- FIXED: Updated to the direct chat URL which works reliably -->
                        <a href="https://www.twitch.tv/solar_0613/chat" target="_blank" class="text-purple-400 underline mt-2 block">Open Chat Popup</a>
                    </div>
                </div>
                <iframe 
                    id="twitch-chat-embed"
                    src=""
                    height="100%"
                    width="100%"
                    class="w-full h-full border-0 relative z-10 bg-transparent">
                </iframe>
            </div>
        </div>
        
        <!-- Schedule Section -->
        <section id="schedule" class="mb-20 max-w-5xl mx-auto">
            <div class="flex items-center mb-8 border-b border-[#2d2d30] pb-4">
                <i data-lucide="calendar-days" class="w-6 h-6 mr-3 twitch-accent"></i>
                <h2 class="text-3xl font-bold">Stream Schedule</h2>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-[#18181b] p-6 rounded-xl border border-[#2d2d30] hover:border-[#9146FF] transition-all duration-300 group hover:-translate-y-1 relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity">
                        <i data-lucide="swords" class="w-24 h-24 text-purple-500"></i>
                    </div>
                    <div class="flex justify-between items-start mb-4 relative z-10">
                        <span class="bg-purple-900/30 text-purple-400 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider">Mon / Wed</span>
                    </div>
                    <div class="text-2xl font-bold text-white mb-1 relative z-10">#</div>
                    <div class="text-purple-400 font-mono text-sm mb-2">#</div>
                    <div class="text-gray-400 text-sm relative z-10">#</div>
                </div>
                
                <div class="bg-[#18181b] p-6 rounded-xl border border-[#2d2d30] hover:border-[#9146FF] transition-all duration-300 group hover:-translate-y-1 relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity">
                        <i data-lucide="users" class="w-24 h-24 text-purple-500"></i>
                    </div>
                    <div class="flex justify-between items-start mb-4 relative z-10">
                        <span class="bg-purple-900/30 text-purple-400 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider">Friday</span>
                    </div>
                    <div class="text-2xl font-bold text-white mb-1 relative z-10">#</div>
                    <div class="text-purple-400 font-mono text-sm mb-2">#</div>
                    <div class="text-gray-400 text-sm relative z-10">#</div>
                </div>
        
                <div class="bg-[#18181b] p-6 rounded-xl border border-[#2d2d30] hover:border-[#9146FF] transition-all duration-300 group hover:-translate-y-1 relative overflow-hidden">
                     <div class="absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity">
                        <i data-lucide="coffee" class="w-24 h-24 text-purple-500"></i>
                    </div>
                    <div class="flex justify-between items-start mb-4 relative z-10">
                        <span class="bg-purple-900/30 text-purple-400 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider">Sunday</span>
                    </div>
                    <div class="text-2xl font-bold text-white mb-1 relative z-10">#</div>
                    <div class="text-purple-400 font-mono text-sm mb-2">#</div>
                    <div class="text-gray-400 text-sm relative z-10">#</div>
                </div>
            </div>
        </section>

        <!-- Socials Grid -->
        <section id="socials" class="mb-12 max-w-5xl mx-auto">
            <h2 class="text-2xl font-bold mb-8 flex items-center justify-center">
                <span class="bg-[#18181b] px-4 z-10">Connect with Solar</span>
                <div class="h-px bg-[#2d2d30] absolute w-full max-w-5xl -z-0"></div>
            </h2>
            <!-- Updated Grid: Changed from md:grid-cols-4 to md:grid-cols-3 since we only have 3 items now -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <a href="https://discord.gg/6dMfjJnuAG" class="bg-[#5865F2]/10 hover:bg-[#5865F2] border border-[#5865F2]/20 hover:border-[#5865F2] p-6 rounded-xl flex flex-col items-center justify-center transition-all duration-300 group h-40">
                    <i data-lucide="message-circle" class="w-8 h-8 mb-3 text-[#5865F2] group-hover:text-white"></i>
                    <span class="font-bold text-[#5865F2] group-hover:text-white">Discord</span>
                </a>
                <a href="https://www.youtube.com/@Solar_0613" class="bg-[#FF0000]/10 hover:bg-[#FF0000] border border-[#FF0000]/20 hover:border-[#FF0000] p-6 rounded-xl flex flex-col items-center justify-center transition-all duration-300 group h-40">
                    <i data-lucide="youtube" class="w-8 h-8 mb-3 text-[#FF0000] group-hover:text-white"></i>
                    <span class="font-bold text-[#FF0000] group-hover:text-white">YouTube</span>
                </a>
                <a href="https://www.instagram.com/alex_spinks0613/" class="bg-gradient-to-tr from-yellow-400/10 to-purple-600/10 hover:from-yellow-400 hover:to-purple-600 border border-purple-500/20 p-6 rounded-xl flex flex-col items-center justify-center transition-all duration-300 group h-40">
                    <i data-lucide="instagram" class="w-8 h-8 mb-3 text-purple-400 group-hover:text-white"></i>
                    <span class="font-bold text-purple-400 group-hover:text-white">Instagram</span>
                </a>
            </div>
        </section>
    </main>

    <footer class="bg-[#18181b] py-8 border-t border-[#2d2d30] text-center text-gray-500 text-sm">
        <p>&copy; 2024 Solar_0613. All rights reserved.</p>
        <p class="mt-2 text-xs text-gray-600">Built with Twitch API & Cloudflare</p>
    </footer>

    <!-- Twitch Embed Script -->
    <script src="https://embed.twitch.tv/embed/v1.js"></script>
       <script type="text/javascript">
        // --- CONFIGURATION ---
        const channelName = "solar_0613";
        const domain = "alexspinks.dev";
        
        // Schedule: 0=Sun, 1=Mon, ... 6=Sat
        // Time is in 24h format (14 = 2:00 PM)
        const schedule = [
            { day: 1, hour: 14, name: "Ranked Grind" },     // Mon 2PM
            { day: 3, hour: 14, name: "Ranked Grind" },     // Wed 2PM
            { day: 5, hour: 18, name: "Community Night" },  // Fri 6PM
            { day: 0, hour: 12, name: "Variety Chill" }     // Sun 12PM
        ];
        // ---------------------
    
        // Initialize Icons
        lucide.createIcons();
    
        // 1. EMBED SETUP
        const currentHost = window.location.hostname;
        // We explicitly add www version to prevent common embed errors
        const parents = [domain, "www." + domain];
        
        if (currentHost && !parents.includes(currentHost) && currentHost !== '') {
            parents.push(currentHost);
        }
    
        const embed = new Twitch.Embed("twitch-embed", {
            width: "100%",
            height: "100%",
            channel: channelName,
            parent: parents,
            layout: "video",
            autoplay: true,
            muted: false
        });
    
        embed.addEventListener(Twitch.Embed.VIDEO_READY, () => {
            document.getElementById('stream-loading').style.display = 'none';
        });
    
        // 2. CHAT SETUP
        const chatIframe = document.getElementById('twitch-chat-embed');
        let chatSrc = `https://www.twitch.tv/embed/${channelName}/chat?darkpopout=true`;
        parents.forEach(p => chatSrc += `&parent=${p}`);
        chatIframe.src = chatSrc;
    
        // 3. COUNTDOWN TIMER LOGIC
        function updateCountdown() {
            const now = new Date();
            const estTime = new Date(now.toLocaleString("en-US", {timeZone: "America/New_York"}));
            
            // Find next stream
            let nextStream = null;
            let minDiff = Infinity;
    
            schedule.forEach(slot => {
                let target = new Date(estTime);
                target.setDate(estTime.getDate() + (slot.day + 7 - estTime.getDay()) % 7);
                target.setHours(slot.hour, 0, 0, 0);
    
                // If today is the day but time passed, move to next week
                if (target <= estTime) {
                    target.setDate(target.getDate() + 7);
                }
    
                const diff = target - estTime;
                if (diff < minDiff) {
                    minDiff = diff;
                    nextStream = { time: target, name: slot.name };
                }
            });
    
            // If we found a time, display it (You can create a div with id="countdown" to show this)
            if (nextStream) {
                console.log(`Next stream: ${nextStream.name} in ${Math.floor(minDiff / 1000 / 60)} mins`);
                // Optional: Update a DOM element here if you add one later
            }
        }
        
        // Run once on load
        updateCountdown();
    
        // Fallback loader hide
        setTimeout(() => {
            const loader = document.getElementById('stream-loading');
            if (loader) loader.style.display = 'none';
        }, 5000);
    </script>
</body>
</html>
